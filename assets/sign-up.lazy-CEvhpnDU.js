import{r as g,$ as G,a as v,_ as u,b as B,c as L,d as E,e as s,f as H,g as U,h as O,j as r,i as j,k as q,l as J,z as p,u as K,m as Q,n as W,o as P,p as y,q as X,F as Y,C as Z,s as ee,t as te,v as ae,w as oe,x,y as re,A as se,B as ne,L as ce,D as le,R as de}from"./index-2hCaBmY1.js";const w=g.forwardRef((e,t)=>{const{pressed:n,defaultPressed:o=!1,onPressedChange:a,...d}=e,[l=!1,i]=G({prop:n,onChange:a,defaultProp:o});return g.createElement(v.button,u({type:"button","aria-pressed":l,"data-state":l?"on":"off","data-disabled":e.disabled?"":void 0},d,{ref:t,onClick:B(e.onClick,()=>{e.disabled||i(!l)})}))}),_=w,b="ToggleGroup",[I,he]=L(b,[E]),N=E(),ie=s.forwardRef((e,t)=>{const{type:n,...o}=e;if(n==="single"){const a=o;return s.createElement(ue,u({},a,{ref:t}))}if(n==="multiple"){const a=o;return s.createElement(fe,u({},a,{ref:t}))}throw new Error(`Missing prop \`type\` expected on \`${b}\``)}),[F,R]=I(b),ue=s.forwardRef((e,t)=>{const{value:n,defaultValue:o,onValueChange:a=()=>{},...d}=e,[l,i]=G({prop:n,defaultProp:o,onChange:a});return s.createElement(F,{scope:e.__scopeToggleGroup,type:"single",value:l?[l]:[],onItemActivate:i,onItemDeactivate:s.useCallback(()=>i(""),[i])},s.createElement(V,u({},d,{ref:t})))}),fe=s.forwardRef((e,t)=>{const{value:n,defaultValue:o,onValueChange:a=()=>{},...d}=e,[l=[],i]=G({prop:n,defaultProp:o,onChange:a}),c=s.useCallback(m=>i(($=[])=>[...$,m]),[i]),f=s.useCallback(m=>i(($=[])=>$.filter(D=>D!==m)),[i]);return s.createElement(F,{scope:e.__scopeToggleGroup,type:"multiple",value:l,onItemActivate:c,onItemDeactivate:f},s.createElement(V,u({},d,{ref:t})))}),[pe,ge]=I(b),V=s.forwardRef((e,t)=>{const{__scopeToggleGroup:n,disabled:o=!1,rovingFocus:a=!0,orientation:d,dir:l,loop:i=!0,...c}=e,f=N(n),m=H(l),$={role:"group",dir:m,...c};return s.createElement(pe,{scope:n,rovingFocus:a,disabled:o},a?s.createElement(U,u({asChild:!0},f,{orientation:d,dir:m,loop:i}),s.createElement(v.div,u({},$,{ref:t}))):s.createElement(v.div,u({},$,{ref:t})))}),h="ToggleGroupItem",me=s.forwardRef((e,t)=>{const n=R(h,e.__scopeToggleGroup),o=ge(h,e.__scopeToggleGroup),a=N(e.__scopeToggleGroup),d=n.value.includes(e.value),l=o.disabled||e.disabled,i={...e,pressed:d,disabled:l},c=s.useRef(null);return o.rovingFocus?s.createElement(O,u({asChild:!0},a,{focusable:!l,active:d,ref:c}),s.createElement(T,u({},i,{ref:t}))):s.createElement(T,u({},i,{ref:t}))}),T=s.forwardRef((e,t)=>{const{__scopeToggleGroup:n,value:o,...a}=e,d=R(h,n),l={role:"radio","aria-checked":e.pressed,"aria-pressed":void 0},i=d.type==="single"?l:void 0;return s.createElement(w,u({},i,a,{ref:t,onPressedChange:c=>{c?d.onItemActivate(o):d.onItemDeactivate(o)}}))}),S=ie,A=me,k=q("inline-flex items-center justify-center rounded-md text-sm font-medium transition-colors hover:bg-muted hover:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 data-[state=on]:bg-accent data-[state=on]:text-accent-foreground",{variants:{variant:{default:"bg-transparent",outline:"border border-input bg-transparent shadow-sm hover:bg-accent hover:text-accent-foreground"},size:{default:"h-9 px-3",sm:"h-8 px-2",lg:"h-10 px-3"}},defaultVariants:{variant:"default",size:"default"}}),$e=g.forwardRef(({className:e,variant:t,size:n,...o},a)=>r.jsx(_,{ref:a,className:j(k({variant:t,size:n,className:e})),...o}));$e.displayName=_.displayName;const z=g.createContext({size:"default",variant:"default"}),M=g.forwardRef(({className:e,variant:t,size:n,children:o,...a},d)=>r.jsx(S,{ref:d,className:j("flex items-center justify-center gap-1",e),...a,children:r.jsx(z.Provider,{value:{variant:t,size:n},children:o})}));M.displayName=S.displayName;const C=g.forwardRef(({className:e,children:t,variant:n,size:o,...a},d)=>{const l=g.useContext(z);return r.jsx(A,{ref:d,className:j(k({variant:l.variant||n,size:l.size||o}),e),...a,children:t})});C.displayName=A.displayName;const Ce=J("/_auth/sign-up")({component:be}),xe=p.object({username:p.string().min(1).max(40),password:p.string().min(8).max(40),name:p.string().min(1).max(40),surname:p.string().min(1).max(40),roleId:p.literal("0").or(p.literal("1"))});function be(){const e=K(),t=Q(),n=W(c=>c.signIn),{mutateAsync:o,error:a}=P({mutationFn:y.user.registerCreate,onError:c=>{t(c,{notify:!0})}}),{mutateAsync:d}=P({mutationFn:y.user.loginCreate,onError:c=>t(c,{notify:!0})}),l=X({defaultValues:{username:"",password:"",name:"",surname:"",roleId:"0"},resolver:le(xe)}),i=async c=>{await o({name:c.name,surname:c.surname,password:c.password,username:c.username,roleId:Number(c.roleId)});const f=await d(c);n({accessToken:f}),e({to:de.fullPath})};return r.jsx(Y,{...l,onSubmit:l.handleSubmit(i),children:r.jsxs(Z,{className:"w-full max-w-sm",children:[r.jsxs(ee,{children:[r.jsx(te,{className:"text-2xl",children:"Register"}),r.jsx(ae,{children:"Enter your username below to login to your account."})]}),r.jsxs(oe,{className:"grid gap-2",children:[r.jsxs("div",{className:"flex flex-row gap-2",children:[r.jsx(x,{label:"Name",name:"name"}),r.jsx(x,{label:"Surname",name:"surname"})]}),r.jsx(x,{label:"Username",name:"username"}),r.jsx(x,{label:"Password",name:"password",type:"password"}),r.jsx(re,{name:"roleId",control:l.control,render:({field:c})=>r.jsxs(M,{onValueChange:f=>c.onChange(f),...c,type:"single",variant:"outline",children:[r.jsx(C,{value:"0",children:"Teacher"}),r.jsx(C,{value:"1",children:"Student"})]})})]}),a&&r.jsx("p",{className:"text-sm text-destructive p-6 pt-0",children:t(a).message}),r.jsxs(se,{className:"flex flex-col gap-2",children:[r.jsx(ne,{className:"w-full",children:"Sign in"}),r.jsxs("div",{className:"mt-4 text-center text-sm",children:["Already have an account?Â ",r.jsx(ce,{to:"/sign-in",className:"underline",children:"Sign in"})]})]})]})})}export{Ce as Route,be as SignUp};
