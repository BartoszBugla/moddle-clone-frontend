import{A as k,r as m,j as e,D as z,i as o,E as D,G as M,H as P,I as q,J as A,K as Q,M as U,N as V,O as I,n as S,P as T,o as p,p as d,Q as E,B as c,l as B,m as O,S as G,L as b,T as J,U as X,C as N,s as v,t as w,w as $,X as _,V as W,z as Y}from"./index-B_I-yeN2.js";import{A as Z}from"./arrow-left-DmUxn-Uy.js";/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ee=k("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const se=k("Trash",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}]]),ae=U,te=V,le=Q,L=m.forwardRef(({className:a,...r},n)=>e.jsx(z,{ref:n,className:o("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",a),...r}));L.displayName=z.displayName;const F=m.forwardRef(({className:a,children:r,...n},i)=>e.jsxs(le,{children:[e.jsx(L,{}),e.jsxs(D,{ref:i,className:o("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",a),...n,children:[r,e.jsxs(M,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[e.jsx(P,{className:"h-4 w-4"}),e.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));F.displayName=D.displayName;const H=({className:a,...r})=>e.jsx("div",{className:o("flex flex-col space-y-1.5 text-center sm:text-left",a),...r});H.displayName="DialogHeader";const R=m.forwardRef(({className:a,...r},n)=>e.jsx(q,{ref:n,className:o("text-lg font-semibold leading-none tracking-tight",a),...r}));R.displayName=q.displayName;const K=m.forwardRef(({className:a,...r},n)=>e.jsx(A,{ref:n,className:o("text-sm text-muted-foreground",a),...r}));K.displayName=A.displayName;const re=({usersInCourse:a,courseId:r})=>{const n=I(),i=S(t=>t.accessTokenPayload),{data:x}=T({queryKey:["users"],queryFn:()=>d.user.allUsersList()}),{mutateAsync:l}=p({mutationFn:t=>d.enrollments.inviteCreate(r,t),onSuccess:()=>{n.invalidateQueries({queryKey:["course",r.toString()]}),E.success("Invited successfully")}});return e.jsxs(ae,{children:[e.jsx(te,{asChild:!0,children:e.jsx(c,{children:"Invite"})}),e.jsxs(F,{children:[e.jsxs(H,{children:[e.jsx(R,{children:"Are you absolutely sure?"}),e.jsx(K,{children:"This action cannot be undone. This will permanently delete your account and remove your data from our servers."})]}),e.jsx("ul",{className:"flex flex-col gap-2 overflow-y-auto max-h-[200px]",children:(x||[]).filter(t=>(t==null?void 0:t.id)&&t.id!==Number((i==null?void 0:i.id)||0)&&!a.includes(t.id)).map((t,u)=>e.jsxs("li",{className:"flex flex-row justify-between text-sm items-center h-10",children:[e.jsx("div",{className:"flex flex-row gap-2 items-center overflow-auto",children:e.jsxs("span",{children:[u+1,". ",t.name," ",t.surname," (",t.username,")"]})}),e.jsx(c,{onClick:()=>l((t==null?void 0:t.id)||0),size:"sm",children:"Invite"})]},t.id))})]})]})},C=B("/_protected/courses/$id")({component:ne});function ne(){var j,g,y;const{id:a}=C.useParams(),r=C.useNavigate(),n=S(s=>s.accessTokenPayload),i=O(),x=I(),{data:l}=T({queryKey:["course",a],enabled:!!a,queryFn:()=>d.courses.coursesDetail(Number(a)),retry(s,f){return i(f,{notify:!0}),r({to:"/dashboard"}),!1}}),{mutateAsync:t}=p({mutationFn:s=>d.enrollments.acceptPartialUpdate(Number(a),s),onSuccess:()=>{x.invalidateQueries({queryKey:["course",a]})}}),{mutateAsync:u}=p({mutationFn:s=>d.enrollments.declineDelete(Number(a),s),onSuccess:()=>{x.invalidateQueries({queryKey:["course",a]})}}),h=(n==null?void 0:n.id)===((g=(j=l==null?void 0:l.user)==null?void 0:j.id)==null?void 0:g.toString());return e.jsx(G,{children:e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-12 gap-4 mb-10",children:[e.jsxs("div",{className:"sm:col-span-12 col-span-1 flex flex-row justify-between items-center mt-4",children:[e.jsxs(b,{to:"/dashboard",className:o("flex flex-row gap-2",J({variant:"ghost"})),children:[e.jsx(Z,{})," Back to dashboard"]}),e.jsxs(c,{variant:"outline",className:"flex flex-row gap-2",children:["Settings",e.jsx(ee,{className:"size-5"})]})]}),e.jsx("div",{className:"sm:col-span-6 col-span-1 row-span-1 ",children:l&&e.jsx(X,{course:l})}),e.jsx("div",{className:"sm:col-span-6 col-span-1",children:e.jsxs(N,{className:"flex flex-col h-[350px]",children:[e.jsx(v,{children:e.jsx(w,{children:"Student List"})}),e.jsx($,{className:"h-full",children:e.jsx("ul",{className:"flex flex-1 flex-col overflow-y-auto max-h-[200px]",children:((l==null?void 0:l.students)||[]).map((s,f)=>e.jsxs("li",{className:"flex flex-row justify-between text-sm items-center my-1 border-b border-border",children:[e.jsxs("div",{className:"flex flex-col items-start overflow-auto ",children:[e.jsxs("div",{children:[f+1,".",s.username]}),e.jsxs("div",{children:[s.name," ",s.surname]})]}),h&&e.jsxs("span",{className:"ml-auto h-10",children:[s.adminDecision&&e.jsx(c,{size:"icon",variant:"ghost",children:e.jsx(se,{className:"text-destructive"})}),s.userDecision&&e.jsxs(e.Fragment,{children:[e.jsx(c,{onClick:()=>u(s.id||0),size:"icon",variant:"ghost",children:e.jsx(_,{})}),e.jsx(c,{onClick:()=>t(s.id||0),size:"icon",variant:"ghost",children:e.jsx(W,{className:"text-destructive"})})]})]})]},s.id))})}),e.jsx(Y,{children:h&&e.jsx(re,{courseId:Number(a),usersInCourse:((l==null?void 0:l.students)||[]).map(({id:s})=>s||0)})})]})}),e.jsx("div",{className:"flex flex-col gap-4 col-span-1 sm:col-span-12",children:e.jsxs(N,{children:[e.jsxs(v,{className:"flex flex-row justify-between",children:[e.jsx(w,{children:"Exercises"}),e.jsx(c,{children:"Add"})]}),e.jsx($,{children:e.jsx("ul",{className:"flex flex-col gap-4",children:(y=l==null?void 0:l.exercises)==null?void 0:y.map(s=>s.exerciseId?e.jsx(b,{to:"/exercise/$id",params:{id:s.exerciseId},children:e.jsxs("div",{className:"flex w-full flex-col gap-2 border-border border p-4 rounded-md",children:[e.jsxs("div",{className:"flex flex-row gap-2 w-full items-center justify-between",children:[e.jsx("h4",{children:s.exerciseName}),e.jsxs("p",{className:"text-muted-foreground text-sm",children:["Deadline: ",s.deadLine]})]}),e.jsx("p",{className:"line-clamp-3 text-sm",children:s.exerciseDescription})]})}):null)})})]})})]})})}export{C as Route};
