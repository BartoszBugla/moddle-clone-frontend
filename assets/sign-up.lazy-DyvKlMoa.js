import{c as p,u as h,a as j,b as f,d as m,e as i,f as w,j as e,F as N,C as b,g as y,h as C,i as F,k as S,l as n,m as R,B as E,L as I,R as k}from"./index-CRQIH0b2.js";import{z as a,t as A}from"./index-CR9fnBmN.js";const z=p("/_auth/sign-up")({component:H}),v=a.object({username:a.string().min(1).max(40),password:a.string().min(8).max(40),name:a.string().min(1).max(40),surname:a.string().min(1).max(40)});function H(){const l=h(),r=j(),c=f(s=>s.signIn),{mutateAsync:u,error:t}=m({mutationFn:i.user.registerCreate,onError:s=>{r(s,{notify:!0})}}),{mutateAsync:d}=m({mutationFn:i.user.loginCreate,onError:s=>r(s,{notify:!0})}),o=w({defaultValues:{username:"",password:"",name:"",surname:""},resolver:A(v)}),x=async s=>{await u({name:s.name,surname:s.surname,password:s.password,username:s.username,roleId:0});const g=await d(s);c({accessToken:g}),l({to:k.fullPath})};return e.jsx(N,{...o,onSubmit:o.handleSubmit(x),children:e.jsxs(b,{className:"w-full max-w-sm",children:[e.jsxs(y,{children:[e.jsx(C,{className:"text-2xl",children:"Register"}),e.jsx(F,{children:"Enter your username below to login to your account."})]}),e.jsxs(S,{className:"grid gap-2",children:[e.jsxs("div",{className:"flex flex-row gap-2",children:[e.jsx(n,{label:"Name",name:"name"}),e.jsx(n,{label:"Surname",name:"surname"})]}),e.jsx(n,{label:"Username",name:"username"}),e.jsx(n,{label:"Password",name:"password",type:"password"})]}),t&&e.jsx("p",{className:"text-sm text-destructive p-6 pt-0",children:r(t).message}),e.jsxs(R,{className:"flex flex-col gap-2",children:[e.jsx(E,{className:"w-full",children:"Sign in"}),e.jsxs("div",{className:"mt-4 text-center text-sm",children:["Already have an account?Â ",e.jsx(I,{to:"/sign-in",className:"underline",children:"Sign in"})]})]})]})})}export{z as Route,H as SignUp};
